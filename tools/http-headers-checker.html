<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP Headers Checker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
    crossorigin="anonymous"></script>
</head>
<body>
    <div id="header-placeholder"></div>

    <main class="container my-4">
        <h1 class="text-center mb-4">HTTP Headers Checker</h1>
        <div class="ad-section">
            <!-- Ad Space -->
            <p>Advertisement</p>
        </div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">HTTP Headers Checker Functionality</h5>
                <p class="card-text">This is a placeholder for the HTTP Headers Checker tool. Its functionality will be implemented here.</p>
                <div class="mb-3">
                    <label for="urlInput" class="form-label">Enter URL</label>
                    <input type="url" class="form-control" id="urlInput" placeholder="https://example.com">
                </div>
                <div class="d-grid gap-2 mb-3">
                    <button class="btn btn-primary" id="checkBtn">Check Headers</button>
                    <button class="btn btn-secondary" id="clearBtn">Clear</button>
                </div>
                <div id="headersResult" class="mt-4">
                    <h5>HTTP Headers:</h5>
                    <pre id="resultDisplay" class="bg-light p-3 rounded" style="white-space: pre-wrap; word-wrap: break-word;">No headers yet.</pre>
                </div>
            </div>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/loadComponents.js"></script>
    <script>
        // JavaScript for HTTP Headers Checker tool
        document.addEventListener('DOMContentLoaded', function() {
            const urlInput = document.getElementById('urlInput');
            const checkBtn = document.getElementById('checkBtn');
            const clearBtn = document.getElementById('clearBtn');
            const resultDisplay = document.getElementById('resultDisplay');

            checkBtn.addEventListener('click', fetchHttpHeaders);
            clearBtn.addEventListener('click', clearFields);

            async function fetchHttpHeaders() {
                const url = urlInput.value.trim();
                if (!url) {
                    resultDisplay.textContent = 'Please enter a URL.';
                    return;
                }

                if (!isValidUrl(url)) {
                    resultDisplay.textContent = 'Please enter a valid URL (e.g., https://example.com).';
                    return;
                }

                resultDisplay.textContent = 'Fetching HTTP headers...';
                try {
                    // Using a proxy to bypass CORS issues with external APIs
                    // Note: This is a simplified example. In a production environment,
                    // you would typically have a backend proxy to handle API requests securely.
                    const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(`https://headers.freeaiapi.xyz/?url=${url}`)}`;
                    const response = await fetch(proxyUrl);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const data = await response.text();
                    resultDisplay.textContent = data || 'No HTTP headers found for this URL.';
                } catch (error) {
                    console.error('Error fetching HTTP headers:', error);
                    resultDisplay.textContent = `Error: ${error.message}. Could not fetch HTTP headers.`;
                }
            }

            function isValidUrl(string) {
                try {
                    new URL(string);
                    return true;
                } catch (e) {
                    return false;
                }
            }

            function clearFields() {
                urlInput.value = '';
                resultDisplay.textContent = 'No headers yet.';
            }
        });
    </script>
</body>
</html>