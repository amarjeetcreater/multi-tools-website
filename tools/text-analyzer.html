<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Analyzer - Multi-Tools</title>
    <meta name="description" content="Analyze text with detailed statistics including word count, character count, reading time, and more. Free online text analysis tool.">
    <meta name="keywords" content="text analyzer, word counter, character counter, reading time, text statistics, text analysis">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/style.css">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
    crossorigin="anonymous"></script>
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <div class="container mt-4">
        <div class="row">
            <div class="col-lg-8">
                <div class="tool-container">
                    <h1 class="tool-title">
                        <i class="fas fa-chart-bar"></i> Text Analyzer
                    </h1>
                    <p class="tool-description">
                        Analyze text with detailed statistics including word count, character count, reading time, 
                        and various linguistic metrics. Perfect for writers, students, and content creators.
                    </p>

                    <div class="card">
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="textInput" class="form-label">Enter Text to Analyze</label>
                                <textarea class="form-control" id="textInput" rows="10" 
                                          placeholder="Paste or type your text here to analyze..."></textarea>
                            </div>

                            <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                                <button class="btn btn-primary" onclick="analyzeText()">
                                    <i class="fas fa-search"></i> Analyze Text
                                </button>
                                <button class="btn btn-secondary" onclick="loadSampleText()">
                                    <i class="fas fa-file-alt"></i> Load Sample
                                </button>
                                <button class="btn btn-outline-secondary" onclick="clearText()">
                                    <i class="fas fa-eraser"></i> Clear
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="resultContainer" class="mt-4" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Text Analysis Results</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6>Basic Statistics</h6>
                                        <div id="basicStats"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>Reading Metrics</h6>
                                        <div id="readingStats"></div>
                                    </div>
                                </div>
                                
                                <div class="row mt-3">
                                    <div class="col-md-6">
                                        <h6>Word Analysis</h6>
                                        <div id="wordStats"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>Character Analysis</h6>
                                        <div id="charStats"></div>
                                    </div>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-12">
                                        <h6>Most Common Words</h6>
                                        <div id="commonWords"></div>
                                    </div>
                                </div>

                                <div class="mt-3">
                                    <button class="btn btn-success" onclick="downloadAnalysis()">
                                        <i class="fas fa-download"></i> Download Report
                                    </button>
                                    <button class="btn btn-info" onclick="copyAnalysis()">
                                        <i class="fas fa-copy"></i> Copy Results
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="sidebar">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-info-circle"></i> Analysis Features</h5>
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled">
                                <li>• Word and character counts</li>
                                <li>• Reading time estimation</li>
                                <li>• Average word length</li>
                                <li>• Sentence and paragraph counts</li>
                                <li>• Most common words</li>
                                <li>• Text complexity metrics</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-lightbulb"></i> Writing Tips</h5>
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled">
                                <li>• Aim for 15-20 words per sentence</li>
                                <li>• Use active voice when possible</li>
                                <li>• Vary sentence length</li>
                                <li>• Keep paragraphs focused</li>
                                <li>• Use transition words</li>
                                <li>• Proofread carefully</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-ad"></i> Ad Space</h5>
                        </div>
                        <div class="card-body">
                            <div class="ad-placeholder">
                                <p class="text-muted text-center">Advertisement</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../js/main.js"></script>
    
    <script>
        let analysisResults = null;

        // Auto-analyze as user types
        document.getElementById('textInput').addEventListener('input', function() {
            if (this.value.length > 10) {
                analyzeText();
            } else {
                document.getElementById('resultContainer').style.display = 'none';
            }
        });

        function analyzeText() {
            const text = document.getElementById('textInput').value.trim();
            
            if (!text) {
                MultiTools.showError('Please enter some text to analyze');
                return;
            }

            analysisResults = performTextAnalysis(text);
            displayResults(analysisResults);
            document.getElementById('resultContainer').style.display = 'block';
            MultiTools.showSuccess('Text analyzed successfully!');
        }

        function performTextAnalysis(text) {
            // Basic counts
            const words = text.split(/\s+/).filter(word => word.length > 0);
            const characters = text.length;
            const charactersNoSpaces = text.replace(/\s/g, '').length;
            const sentences = text.split(/[.!?]+/).filter(sentence => sentence.trim().length > 0);
            const paragraphs = text.split(/\n\s*\n/).filter(para => para.trim().length > 0);
            
            // Word analysis
            const wordLengths = words.map(word => word.length);
            const avgWordLength = wordLengths.length > 0 ? 
                (wordLengths.reduce((sum, len) => sum + len, 0) / wordLengths.length).toFixed(1) : 0;
            
            // Reading time (average 200 words per minute)
            const readingTimeMinutes = Math.ceil(words.length / 200);
            const readingTimeSeconds = Math.round((words.length / 200) * 60);
            
            // Most common words
            const wordFreq = {};
            words.forEach(word => {
                const cleanWord = word.toLowerCase().replace(/[^\w]/g, '');
                if (cleanWord.length > 2) {
                    wordFreq[cleanWord] = (wordFreq[cleanWord] || 0) + 1;
                }
            });
            
            const commonWords = Object.entries(wordFreq)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 10)
                .map(([word, count]) => ({ word, count }));
            
            // Text complexity
            const longWords = words.filter(word => word.length > 6).length;
            const complexityScore = words.length > 0 ? (longWords / words.length * 100).toFixed(1) : 0;
            
            return {
                words: words.length,
                characters,
                charactersNoSpaces,
                sentences: sentences.length,
                paragraphs: paragraphs.length,
                avgWordLength,
                readingTimeMinutes,
                readingTimeSeconds,
                commonWords,
                complexityScore,
                longWords
            };
        }

        function displayResults(results) {
            // Basic stats
            document.getElementById('basicStats').innerHTML = `
                <div class="mb-2"><strong>Words:</strong> ${results.words.toLocaleString()}</div>
                <div class="mb-2"><strong>Characters:</strong> ${results.characters.toLocaleString()}</div>
                <div class="mb-2"><strong>Characters (no spaces):</strong> ${results.charactersNoSpaces.toLocaleString()}</div>
                <div class="mb-2"><strong>Sentences:</strong> ${results.sentences}</div>
                <div class="mb-2"><strong>Paragraphs:</strong> ${results.paragraphs}</div>
            `;

            // Reading stats
            document.getElementById('readingStats').innerHTML = `
                <div class="mb-2"><strong>Reading Time:</strong> ${results.readingTimeMinutes} min ${results.readingTimeSeconds % 60}s</div>
                <div class="mb-2"><strong>Average Word Length:</strong> ${results.avgWordLength} characters</div>
                <div class="mb-2"><strong>Complexity Score:</strong> ${results.complexityScore}%</div>
                <div class="mb-2"><strong>Long Words (>6 chars):</strong> ${results.longWords}</div>
            `;

            // Word stats
            document.getElementById('wordStats').innerHTML = `
                <div class="mb-2"><strong>Unique Words:</strong> ${new Set(results.commonWords.map(w => w.word)).size}</div>
                <div class="mb-2"><strong>Average Words per Sentence:</strong> ${results.sentences > 0 ? (results.words / results.sentences).toFixed(1) : 0}</div>
                <div class="mb-2"><strong>Words per Paragraph:</strong> ${results.paragraphs > 0 ? (results.words / results.paragraphs).toFixed(1) : 0}</div>
            `;

            // Character stats
            document.getElementById('charStats').innerHTML = `
                <div class="mb-2"><strong>Characters per Word:</strong> ${results.avgWordLength}</div>
                <div class="mb-2"><strong>Characters per Sentence:</strong> ${results.sentences > 0 ? (results.characters / results.sentences).toFixed(1) : 0}</div>
                <div class="mb-2"><strong>Space Percentage:</strong> ${((results.characters - results.charactersNoSpaces) / results.characters * 100).toFixed(1)}%</div>
            `;

            // Common words
            document.getElementById('commonWords').innerHTML = results.commonWords.map(item => 
                `<span class="badge bg-primary me-1 mb-1">${item.word} (${item.count})</span>`
            ).join('');
        }

        function loadSampleText() {
            const sampleText = `The quick brown fox jumps over the lazy dog. This pangram contains every letter of the alphabet at least once. Pangrams are often used to display font samples and test keyboards.

Writing is a skill that improves with practice. The more you write, the better you become at expressing your thoughts clearly and concisely. Good writing engages readers and communicates ideas effectively.

Reading and writing are fundamental skills that open doors to knowledge and opportunities. They allow us to learn from others, share our experiences, and connect with people across time and space.`;
            
            document.getElementById('textInput').value = sampleText;
            analyzeText();
        }

        function clearText() {
            document.getElementById('textInput').value = '';
            document.getElementById('resultContainer').style.display = 'none';
            analysisResults = null;
            MultiTools.showSuccess('Text cleared');
        }

        function downloadAnalysis() {
            if (!analysisResults) {
                MultiTools.showError('No analysis to download');
                return;
            }

            const text = document.getElementById('textInput').value;
            const report = generateAnalysisReport(text, analysisResults);
            
            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'text-analysis-report.txt';
            a.click();
            URL.revokeObjectURL(url);
            
            MultiTools.showSuccess('Analysis report downloaded!');
        }

        function generateAnalysisReport(text, results) {
            return `TEXT ANALYSIS REPORT
Generated on: ${new Date().toLocaleString()}

BASIC STATISTICS:
- Words: ${results.words.toLocaleString()}
- Characters: ${results.characters.toLocaleString()}
- Characters (no spaces): ${results.charactersNoSpaces.toLocaleString()}
- Sentences: ${results.sentences}
- Paragraphs: ${results.paragraphs}

READING METRICS:
- Reading Time: ${results.readingTimeMinutes} min ${results.readingTimeSeconds % 60}s
- Average Word Length: ${results.avgWordLength} characters
- Complexity Score: ${results.complexityScore}%
- Long Words (>6 chars): ${results.longWords}

WORD ANALYSIS:
- Unique Words: ${new Set(results.commonWords.map(w => w.word)).size}
- Average Words per Sentence: ${results.sentences > 0 ? (results.words / results.sentences).toFixed(1) : 0}
- Words per Paragraph: ${results.paragraphs > 0 ? (results.words / results.paragraphs).toFixed(1) : 0}

MOST COMMON WORDS:
${results.commonWords.map(item => `- ${item.word}: ${item.count} times`).join('\n')}

ORIGINAL TEXT:
${text}`;
        }

        function copyAnalysis() {
            if (!analysisResults) {
                MultiTools.showError('No analysis to copy');
                return;
            }

            const text = document.getElementById('textInput').value;
            const report = generateAnalysisReport(text, analysisResults);
            
            navigator.clipboard.writeText(report).then(() => {
                MultiTools.showSuccess('Analysis copied to clipboard!');
            }).catch(() => {
                MultiTools.showError('Failed to copy analysis');
            });
        }

        // Load components when page loads
        document.addEventListener('DOMContentLoaded', function() {
            MultiTools.loadHeader();
            MultiTools.loadFooter();
        });
    </script>

    <script>
    (function() {
      function getTheme() {
        try {
          var t = localStorage.getItem('theme');
          if (t === 'dark' || t === 'light') return t;
        } catch(e) {}
        return 'light';
      }
      document.documentElement.setAttribute('data-theme', getTheme());
    })();
    </script>
</body>
</html>