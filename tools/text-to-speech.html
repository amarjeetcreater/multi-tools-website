<script>
// Theme detection and application script
try {
    const userTheme = localStorage.getItem('theme');
    const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    const theme = userTheme || systemTheme || 'light';
    document.documentElement.setAttribute('data-theme', theme);
} catch (e) {
    document.documentElement.setAttribute('data-theme', 'light');
}
</script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text-to-Speech - Multi-Tools</title>
    <meta name="description" content="Convert text to speech with natural voice">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
    crossorigin="anonymous"></script>
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container mt-5">
        <div class="tool-container">
            <div class="tool-header">
                <h1><i class="fas fa-volume-up"></i> Text-to-Speech</h1>
                <p>Convert text to speech with natural voice</p>
            </div>

            <div class="row">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="textInput" class="form-label">Enter Text</label>
                                <textarea class="form-control" id="textInput" rows="8" placeholder="Enter your text here to convert to speech..."></textarea>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="voiceSelect" class="form-label">Voice</label>
                                    <select class="form-select" id="voiceSelect">
                                        <option value="en-US">English (US)</option>
                                        <option value="en-GB">English (UK)</option>
                                        <option value="es-ES">Spanish</option>
                                        <option value="fr-FR">French</option>
                                        <option value="de-DE">German</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="speedSelect" class="form-label">Speed</label>
                                    <select class="form-select" id="speedSelect">
                                        <option value="0.5">Slow (0.5x)</option>
                                        <option value="0.75">Slow (0.75x)</option>
                                        <option value="1" selected>Normal (1x)</option>
                                        <option value="1.25">Fast (1.25x)</option>
                                        <option value="1.5">Fast (1.5x)</option>
                                        <option value="2">Very Fast (2x)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="pitchSelect" class="form-label">Pitch</label>
                                    <select class="form-select" id="pitchSelect">
                                        <option value="0.5">Low</option>
                                        <option value="0.75">Medium-Low</option>
                                        <option value="1" selected>Normal</option>
                                        <option value="1.25">Medium-High</option>
                                        <option value="1.5">High</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="volumeSelect" class="form-label">Volume</label>
                                    <select class="form-select" id="volumeSelect">
                                        <option value="0.25">Low</option>
                                        <option value="0.5">Medium-Low</option>
                                        <option value="0.75">Medium</option>
                                        <option value="1" selected>High</option>
                                    </select>
                                </div>
                            </div>

                            <div class="mb-3">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-primary" id="speakBtn">
                                        <i class="fas fa-play"></i> Speak
                                    </button>
                                    <button type="button" class="btn btn-secondary" id="pauseBtn" disabled>
                                        <i class="fas fa-pause"></i> Pause
                                    </button>
                                    <button type="button" class="btn btn-secondary" id="stopBtn" disabled>
                                        <i class="fas fa-stop"></i> Stop
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-info-circle"></i> About Text-to-Speech</h5>
                        </div>
                        <div class="card-body">
                            <p class="small">This tool converts text to speech using:</p>
                            <ul class="list-unstyled small">
                                <li><i class="fas fa-check text-success"></i> Natural voice synthesis</li>
                                <li><i class="fas fa-check text-success"></i> Multiple voice options</li>
                                <li><i class="fas fa-check text-success"></i> Adjustable speed & pitch</li>
                                <li><i class="fas fa-check text-success"></i> Volume control</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="result-container mt-4" id="resultContainer" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-chart-bar"></i> Speech Status</h5>
                    </div>
                    <div class="card-body">
                        <div id="speechResults"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/main.js"></script>
    <script>
        let speechSynthesis = window.speechSynthesis;
        let currentUtterance = null;
        let isPlaying = false;

        document.addEventListener('DOMContentLoaded', function() {
            loadHeader();
            loadFooter();

            document.getElementById('speakBtn').addEventListener('click', function() {
                speakText();
            });

            document.getElementById('pauseBtn').addEventListener('click', function() {
                pauseSpeech();
            });

            document.getElementById('stopBtn').addEventListener('click', function() {
                stopSpeech();
            });

            // Check if speech synthesis is supported
            if (!speechSynthesis) {
                document.getElementById('speakBtn').disabled = true;
                MultiTools.showError('Speech synthesis is not supported in your browser.');
            }
        });

        function speakText() {
            const text = document.getElementById('textInput').value.trim();
            
            if (!text) {
                MultiTools.showError('Please enter some text to speak.');
                return;
            }

            if (!speechSynthesis) {
                MultiTools.showError('Speech synthesis is not supported in your browser.');
                return;
            }

            // Stop any current speech
            if (currentUtterance) {
                speechSynthesis.cancel();
            }

            // Create new utterance
            currentUtterance = new SpeechSynthesisUtterance(text);
            
            // Set voice
            const voiceSelect = document.getElementById('voiceSelect');
            const voices = speechSynthesis.getVoices();
            const selectedVoice = voices.find(voice => voice.lang === voiceSelect.value);
            if (selectedVoice) {
                currentUtterance.voice = selectedVoice;
            }

            // Set properties
            currentUtterance.rate = parseFloat(document.getElementById('speedSelect').value);
            currentUtterance.pitch = parseFloat(document.getElementById('pitchSelect').value);
            currentUtterance.volume = parseFloat(document.getElementById('volumeSelect').value);

            // Event handlers
            currentUtterance.onstart = function() {
                isPlaying = true;
                updateButtons();
                updateStatus('Speaking...', 'success');
            };

            currentUtterance.onend = function() {
                isPlaying = false;
                updateButtons();
                updateStatus('Speech completed.', 'info');
            };

            currentUtterance.onerror = function(event) {
                isPlaying = false;
                updateButtons();
                updateStatus('Speech error: ' + event.error, 'danger');
            };

            // Start speaking
            speechSynthesis.speak(currentUtterance);
            document.getElementById('resultContainer').style.display = 'block';
        }

        function pauseSpeech() {
            if (speechSynthesis.speaking) {
                speechSynthesis.pause();
                updateStatus('Speech paused.', 'warning');
            }
        }

        function stopSpeech() {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
                isPlaying = false;
                updateButtons();
                updateStatus('Speech stopped.', 'secondary');
            }
        }

        function updateButtons() {
            const speakBtn = document.getElementById('speakBtn');
            const pauseBtn = document.getElementById('pauseBtn');
            const stopBtn = document.getElementById('stopBtn');

            speakBtn.disabled = isPlaying;
            pauseBtn.disabled = !isPlaying;
            stopBtn.disabled = !isPlaying;
        }

        function updateStatus(message, type) {
            const resultsDiv = document.getElementById('speechResults');
            const alertClass = `alert alert-${type}`;
            
            resultsDiv.innerHTML = `
                <div class="${alertClass}">
                    <h6><i class="fas fa-volume-up"></i> ${message}</h6>
                    <p class="mb-0">Text: "${document.getElementById('textInput').value.substring(0, 100)}${document.getElementById('textInput').value.length > 100 ? '...' : ''}"</p>
                </div>
            `;
        }

    </script>
</body>
</html>