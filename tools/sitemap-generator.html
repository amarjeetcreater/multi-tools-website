<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sitemap Generator - Multi-Tools</title>
    <meta name="description" content="Generate XML sitemaps for your website. Free online sitemap generator for SEO.">
    <meta name="keywords" content="sitemap generator, xml sitemap, seo sitemap">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/style.css">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
    crossorigin="anonymous"></script>
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="tool-container">
                    <div class="text-center mb-4">
                        <h1><i class="fas fa-sitemap"></i> Sitemap Generator</h1>
                        <p class="lead">Generate XML sitemaps for your website</p>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-edit"></i> Website Information</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="websiteUrl" class="form-label">Website URL:</label>
                                        <input type="url" class="form-control" id="websiteUrl" placeholder="https://example.com">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="urlsList" class="form-label">URLs (one per line):</label>
                                        <textarea class="form-control" id="urlsList" rows="10" placeholder="https://example.com/page1&#10;https://example.com/page2&#10;https://example.com/page3"></textarea>
                                        <div class="form-text">Enter your website URLs, one per line</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="lastModified" class="form-label">Last Modified Date:</label>
                                        <input type="date" class="form-control" id="lastModified" value="">
                                    </div>
                                    
                                    <button class="btn btn-primary w-100" id="generateBtn">
                                        <i class="fas fa-magic"></i> Generate Sitemap
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-cogs"></i> Sitemap Settings</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="changeFreq" class="form-label">Default Change Frequency:</label>
                                        <select class="form-select" id="changeFreq">
                                            <option value="always">Always</option>
                                            <option value="hourly">Hourly</option>
                                            <option value="daily" selected>Daily</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="monthly">Monthly</option>
                                            <option value="yearly">Yearly</option>
                                            <option value="never">Never</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="priority" class="form-label">Default Priority:</label>
                                        <select class="form-select" id="priority">
                                            <option value="0.0">0.0</option>
                                            <option value="0.1">0.1</option>
                                            <option value="0.2">0.2</option>
                                            <option value="0.3">0.3</option>
                                            <option value="0.4">0.4</option>
                                            <option value="0.5">0.5</option>
                                            <option value="0.6">0.6</option>
                                            <option value="0.7">0.7</option>
                                            <option value="0.8" selected>0.8</option>
                                            <option value="0.9">0.9</option>
                                            <option value="1.0">1.0</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="includeImages" checked>
                                            <label class="form-check-label" for="includeImages">
                                                Include image sitemap
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="includeNews" checked>
                                            <label class="form-check-label" for="includeNews">
                                                Include news sitemap
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="includeVideo" checked>
                                            <label class="form-check-label" for="includeVideo">
                                                Include video sitemap
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="sitemapType" class="form-label">Sitemap Type:</label>
                                        <select class="form-select" id="sitemapType">
                                            <option value="xml">XML Sitemap</option>
                                            <option value="txt">Text Sitemap</option>
                                            <option value="html">HTML Sitemap</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-code"></i> Generated Sitemap</h5>
                                </div>
                                <div class="card-body">
                                    <div id="resultContainer" style="display: none;">
                                        <div class="mb-3">
                                            <label for="sitemapOutput" class="form-label">Sitemap Content:</label>
                                            <textarea class="form-control" id="sitemapOutput" rows="15" readonly></textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6>Sitemap Statistics:</h6>
                                                    <div class="list-group">
                                                        <div class="list-group-item d-flex justify-content-between">
                                                            <span>Total URLs:</span>
                                                            <span id="totalUrls">0</span>
                                                        </div>
                                                        <div class="list-group-item d-flex justify-content-between">
                                                            <span>Sitemap Size:</span>
                                                            <span id="sitemapSize">0 KB</span>
                                                        </div>
                                                        <div class="list-group-item d-flex justify-content-between">
                                                            <span>Type:</span>
                                                            <span id="sitemapTypeDisplay">XML</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <h6>Next Steps:</h6>
                                                    <ul class="list-unstyled">
                                                        <li><i class="fas fa-upload text-primary"></i> Upload to your website root</li>
                                                        <li><i class="fas fa-submit text-success"></i> Submit to Google Search Console</li>
                                                        <li><i class="fas fa-robot text-info"></i> Add to robots.txt</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid gap-2 d-md-flex">
                                            <button class="btn btn-primary" id="copyBtn">
                                                <i class="fas fa-copy"></i> Copy Sitemap
                                            </button>
                                            <button class="btn btn-outline-secondary" id="downloadBtn">
                                                <i class="fas fa-download"></i> Download Sitemap
                                            </button>
                                            <button class="btn btn-outline-info" id="validateBtn">
                                                <i class="fas fa-check-circle"></i> Validate Sitemap
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ad Space -->
                    <div class="ad-space mt-4">
                        <div class="ad-placeholder">
                            <i class="fas fa-ad"></i>
                            <p>Advertisement Space</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Main JS -->
    <script src="../js/main.js"></script>
    
    <script>
        let generatedSitemap = null;

        document.addEventListener('DOMContentLoaded', function() {
            initializeSitemapGenerator();
        });

        function initializeSitemapGenerator() {
            const generateBtn = document.getElementById('generateBtn');
            const lastModified = document.getElementById('lastModified');
            
            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            lastModified.value = today;

            generateBtn.addEventListener('click', generateSitemap);
        }

        function generateSitemap() {
            const websiteUrl = document.getElementById('websiteUrl').value.trim();
            const urlsList = document.getElementById('urlsList').value.trim();
            const lastModified = document.getElementById('lastModified').value;
            const changeFreq = document.getElementById('changeFreq').value;
            const priority = document.getElementById('priority').value;
            const includeImages = document.getElementById('includeImages').checked;
            const includeNews = document.getElementById('includeNews').checked;
            const includeVideo = document.getElementById('includeVideo').checked;
            const sitemapType = document.getElementById('sitemapType').value;

            if (!urlsList) {
                MultiTools.showError('Please enter at least one URL.');
                return;
            }

            const urls = urlsList.split('\n').filter(url => url.trim());
            const baseUrl = websiteUrl || extractBaseUrl(urls[0]);

            let sitemapContent = '';

            switch (sitemapType) {
                case 'xml':
                    sitemapContent = generateXMLSitemap(urls, baseUrl, lastModified, changeFreq, priority, includeImages, includeNews, includeVideo);
                    break;
                case 'txt':
                    sitemapContent = generateTextSitemap(urls);
                    break;
                case 'html':
                    sitemapContent = generateHTMLSitemap(urls, baseUrl);
                    break;
            }

            displayResult(sitemapContent, urls.length, sitemapType);
        }

        function generateXMLSitemap(urls, baseUrl, lastModified, changeFreq, priority, includeImages, includeNews, includeVideo) {
            let xml = '<?xml version="1.0" encoding="UTF-8"?>\n';
            xml += '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"';
            
            if (includeImages) xml += ' xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"';
            if (includeNews) xml += ' xmlns:news="http://www.google.com/schemas/sitemap-news/0.9"';
            if (includeVideo) xml += ' xmlns:video="http://www.google.com/schemas/sitemap-video/1.1"';
            
            xml += '>\n';

            urls.forEach(url => {
                xml += '  <url>\n';
                xml += `    <loc>${url}</loc>\n`;
                xml += `    <lastmod>${lastModified}</lastmod>\n`;
                xml += `    <changefreq>${changeFreq}</changefreq>\n`;
                xml += `    <priority>${priority}</priority>\n`;
                
                if (includeImages) {
                    xml += '    <image:image>\n';
                    xml += `      <image:loc>${url}/image.jpg</image:loc>\n`;
                    xml += '      <image:title>Page Image</image:title>\n';
                    xml += '    </image:image>\n';
                }
                
                if (includeNews) {
                    xml += '    <news:news>\n';
                    xml += '      <news:publication>\n';
                    xml += '        <news:name>Your Website</news:name>\n';
                    xml += '        <news:language>en</news:language>\n';
                    xml += '      </news:publication>\n';
                    xml += `      <news:publication_date>${lastModified}</news:publication_date>\n`;
                    xml += '      <news:title>Page Title</news:title>\n';
                    xml += '    </news:news>\n';
                }
                
                if (includeVideo) {
                    xml += '    <video:video>\n';
                    xml += '      <video:thumbnail_loc>https://example.com/thumbnail.jpg</video:thumbnail_loc>\n';
                    xml += '      <video:title>Video Title</video:title>\n';
                    xml += '      <video:description>Video Description</video:description>\n';
                    xml += '    </video:video>\n';
                }
                
                xml += '  </url>\n';
            });

            xml += '</urlset>';
            return xml;
        }

        function generateTextSitemap(urls) {
            return urls.join('\n');
        }

        function generateHTMLSitemap(urls, baseUrl) {
            let html = '<!DOCTYPE html>\n<html lang="en">\n<head>\n';
            html += '    <meta charset="UTF-8">\n';
            html += '    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n';
            html += '    <title>Sitemap</title>\n';
            html += '    <style>\n';
            html += '        body { font-family: Arial, sans-serif; margin: 40px; }\n';
            html += '        h1 { color: #333; }\n';
            html += '        ul { list-style: none; padding: 0; }\n';
            html += '        li { margin: 10px 0; }\n';
            html += '        a { color: #0066cc; text-decoration: none; }\n';
            html += '        a:hover { text-decoration: underline; }\n';
            html += '    </style>\n';
            html += '</head>\n<body>\n';
            html += '    <h1>Sitemap</h1>\n';
            html += '    <ul>\n';
            
            urls.forEach(url => {
                const pageName = extractPageName(url);
                html += `        <li><a href="${url}">${pageName}</a></li>\n`;
            });
            
            html += '    </ul>\n';
            html += '</body>\n</html>';
            return html;
        }

        function extractBaseUrl(url) {
            try {
                const urlObj = new URL(url);
                return `${urlObj.protocol}//${urlObj.hostname}`;
            } catch {
                return '';
            }
        }

        function extractPageName(url) {
            try {
                const urlObj = new URL(url);
                const path = urlObj.pathname;
                if (path === '/' || path === '') {
                    return 'Home';
                }
                return path.split('/').pop().replace(/[-_]/g, ' ').replace(/\.[^/.]+$/, '') || 'Page';
            } catch {
                return 'Page';
            }
        }

        function displayResult(sitemapContent, urlCount, sitemapType) {
            const resultContainer = document.getElementById('resultContainer');
            const sitemapOutput = document.getElementById('sitemapOutput');
            const totalUrls = document.getElementById('totalUrls');
            const sitemapSize = document.getElementById('sitemapSize');
            const sitemapTypeDisplay = document.getElementById('sitemapTypeDisplay');
            const copyBtn = document.getElementById('copyBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const validateBtn = document.getElementById('validateBtn');

            sitemapOutput.value = sitemapContent;
            totalUrls.textContent = urlCount;
            sitemapSize.textContent = MultiTools.formatFileSize(new Blob([sitemapContent]).size);
            sitemapTypeDisplay.textContent = sitemapType.toUpperCase();
            resultContainer.style.display = 'block';

            generatedSitemap = { content: sitemapContent, type: sitemapType, urlCount };

            copyBtn.onclick = () => {
                navigator.clipboard.writeText(sitemapContent).then(() => {
                    MultiTools.showSuccess('Sitemap copied to clipboard!');
                });
            };

            downloadBtn.onclick = () => {
                const extension = sitemapType === 'xml' ? 'xml' : sitemapType === 'txt' ? 'txt' : 'html';
                const blob = new Blob([sitemapContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `sitemap.${extension}`;
                link.click();
            };

            validateBtn.onclick = () => {
                validateSitemap(sitemapContent, sitemapType);
            };

            resultContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function validateSitemap(content, type) {
            let issues = [];
            let score = 100;

            if (type === 'xml') {
                // Check for valid XML structure
                if (!content.includes('<?xml version="1.0"')) {
                    issues.push('Missing XML declaration');
                    score -= 20;
                }
                
                if (!content.includes('<urlset')) {
                    issues.push('Missing urlset tag');
                    score -= 30;
                }
                
                if (!content.includes('<url>')) {
                    issues.push('No URL entries found');
                    score -= 40;
                }
                
                // Check for required tags
                const urlMatches = content.match(/<url>/g);
                const locMatches = content.match(/<loc>/g);
                const lastmodMatches = content.match(/<lastmod>/g);
                
                if (urlMatches && locMatches && urlMatches.length !== locMatches.length) {
                    issues.push('Mismatch between URL and location tags');
                    score -= 15;
                }
                
                if (lastmodMatches && lastmodMatches.length < urlMatches.length * 0.8) {
                    issues.push('Missing lastmod dates for some URLs');
                    score -= 10;
                }
            } else if (type === 'txt') {
                const lines = content.split('\n').filter(line => line.trim());
                if (lines.length === 0) {
                    issues.push('No URLs found in text sitemap');
                    score -= 50;
                }
            }

            let message = `Sitemap Validation Score: ${score}/100\n\n`;
            if (issues.length === 0) {
                message += '✅ Your sitemap is valid and well-formed!';
            } else {
                message += 'Issues found:\n';
                issues.forEach(issue => {
                    message += `• ${issue}\n`;
                });
            }

            MultiTools.showInfo(message);
        }
    </script>

    <script>
    (function() {
      function getTheme() {
        try {
          var t = localStorage.getItem('theme');
          if (t === 'dark' || t === 'light') return t;
        } catch(e) {}
        return 'light';
      }
      document.documentElement.setAttribute('data-theme', getTheme());
    })();
    </script>
</body>
</html>