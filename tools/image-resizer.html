<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Resizer - Multi-Tools</title>
    <meta name="description" content="Resize images to any dimension while maintaining quality. Free online image resizer tool.">
    <meta name="keywords" content="image resizer, resize image, online resizer">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
    crossorigin="anonymous"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container mt-5">
        <!-- Top Ad -->
        <div class="ad-space mb-4">
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-7389985631571522"
                data-ad-slot="3374471779"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="tool-container">
                    <div class="text-center mb-4">
                        <h1><i class="fas fa-expand-arrows-alt"></i> Image Resizer</h1>
                        <p class="lead">Resize images to any dimension while maintaining quality</p>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-upload"></i> Upload Image</h5>
                                </div>
                                <div class="card-body">
                                    <div class="file-upload-area" id="uploadArea">
                                        <div class="upload-content">
                                            <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                            <h5>Drag & Drop Image Here</h5>
                                            <p>or click to browse</p>
                                            <input type="file" id="imageInput" accept="image/*" class="file-input">
                                            <button class="btn btn-primary" onclick="document.getElementById('imageInput').click()">
                                                <i class="fas fa-folder-open"></i> Choose File
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div id="imagePreview" class="mt-3" style="display: none;">
                                        <h6>Original Image:</h6>
                                        <img id="previewImg" class="img-fluid rounded" alt="Preview">
                                        <div class="mt-2">
                                            <small class="text-muted">Size: <span id="originalSize"></span></small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-cogs"></i> Resize Settings</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">Resize Method:</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="resizeMethod" id="customSize" value="custom" checked>
                                            <label class="form-check-label" for="customSize">Custom Size</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="resizeMethod" id="percentage" value="percentage">
                                            <label class="form-check-label" for="percentage">Percentage</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="resizeMethod" id="preset" value="preset">
                                            <label class="form-check-label" for="preset">Preset Sizes</label>
                                        </div>
                                    </div>
                                    
                                    <div id="customSizeOptions">
                                        <div class="row">
                                            <div class="col-6">
                                                <label for="newWidth" class="form-label">Width (px):</label>
                                                <input type="number" class="form-control" id="newWidth" min="1" max="4000">
                                            </div>
                                            <div class="col-6">
                                                <label for="newHeight" class="form-label">Height (px):</label>
                                                <input type="number" class="form-control" id="newHeight" min="1" max="4000">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div id="percentageOptions" style="display: none;">
                                        <label for="percentageValue" class="form-label">Percentage:</label>
                                        <input type="number" class="form-control" id="percentageValue" min="1" max="500" value="50">
                                    </div>
                                    
                                    <div id="presetOptions" style="display: none;">
                                        <label for="presetSelect" class="form-label">Preset Size:</label>
                                        <select class="form-select" id="presetSelect">
                                            <option value="1920x1080">Full HD (1920×1080)</option>
                                            <option value="1280x720">HD (1280×720)</option>
                                            <option value="800x600">SVGA (800×600)</option>
                                            <option value="640x480">VGA (640×480)</option>
                                            <option value="320x240">QVGA (320×240)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3 mt-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="maintainAspectRatio" checked>
                                            <label class="form-check-label" for="maintainAspectRatio">
                                                Maintain aspect ratio
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <button class="btn btn-success w-100" id="resizeBtn" disabled>
                                        <i class="fas fa-expand-arrows-alt"></i> Resize Image
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-download"></i> Resized Image</h5>
                                </div>
                                <div class="card-body">
                                    <div id="resultContainer" style="display: none;">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <h6>Resized Image:</h6>
                                                <img id="resultImg" class="img-fluid rounded" alt="Resized Image">
                                                <div class="mt-2">
                                                    <small class="text-muted">New size: <span id="newSize"></span></small>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-grid gap-2">
                                                    <button class="btn btn-primary" id="downloadBtn">
                                                        <i class="fas fa-download"></i> Download
                                                    </button>
                                                    <button class="btn btn-outline-secondary" id="copyBtn">
                                                        <i class="fas fa-copy"></i> Copy to Clipboard
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ad Space -->
                    <div class="ad-space mt-4">
                        <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-7389985631571522"
                            data-ad-slot="1701935776"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Main JS -->
    <script src="../js/main.js"></script>
    
    <script>
        let originalImage = null;
        let resizedImage = null;

        document.addEventListener('DOMContentLoaded', function() {
            initializeImageResizer();
        });

        function initializeImageResizer() {
            const uploadArea = document.getElementById('uploadArea');
            const imageInput = document.getElementById('imageInput');
            const resizeBtn = document.getElementById('resizeBtn');

            // File input change
            imageInput.addEventListener('change', handleFileSelect);

            // Drag and drop
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('drop', handleDrop);
            uploadArea.addEventListener('click', () => imageInput.click());

            // Resize method change
            document.querySelectorAll('input[name="resizeMethod"]').forEach(radio => {
                radio.addEventListener('change', toggleResizeOptions);
            });

            // Resize button
            resizeBtn.addEventListener('click', resizeImage);
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                processImage(file);
            } else {
                MultiTools.showError('Please select a valid image file.');
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('drag-over');
        }

        function handleDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('drag-over');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                const file = files[0];
                if (file.type.startsWith('image/')) {
                    processImage(file);
                } else {
                    MultiTools.showError('Please select a valid image file.');
                }
            }
        }

        function processImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    originalImage = img;
                    displayPreview(img, file);
                    document.getElementById('resizeBtn').disabled = false;
                    updateSizeInputs(img.width, img.height);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function displayPreview(img, file) {
            const previewImg = document.getElementById('previewImg');
            const imagePreview = document.getElementById('imagePreview');
            const originalSize = document.getElementById('originalSize');

            previewImg.src = img.src;
            imagePreview.style.display = 'block';
            originalSize.textContent = `${img.width} × ${img.height} px`;
        }

        function updateSizeInputs(width, height) {
            document.getElementById('newWidth').value = width;
            document.getElementById('newHeight').value = height;
        }

        function toggleResizeOptions() {
            const method = document.querySelector('input[name="resizeMethod"]:checked').value;
            
            document.getElementById('customSizeOptions').style.display = method === 'custom' ? 'block' : 'none';
            document.getElementById('percentageOptions').style.display = method === 'percentage' ? 'block' : 'none';
            document.getElementById('presetOptions').style.display = method === 'preset' ? 'block' : 'none';
        }

        function resizeImage() {
            if (!originalImage) {
                MultiTools.showError('Please select an image first.');
                return;
            }

            const method = document.querySelector('input[name="resizeMethod"]:checked').value;
            const maintainAspectRatio = document.getElementById('maintainAspectRatio').checked;
            
            let newWidth, newHeight;

            switch (method) {
                case 'custom':
                    newWidth = parseInt(document.getElementById('newWidth').value);
                    newHeight = parseInt(document.getElementById('newHeight').value);
                    break;
                case 'percentage':
                    const percentage = parseInt(document.getElementById('percentageValue').value) / 100;
                    newWidth = Math.round(originalImage.width * percentage);
                    newHeight = Math.round(originalImage.height * percentage);
                    break;
                case 'preset':
                    const preset = document.getElementById('presetSelect').value;
                    const [width, height] = preset.split('x').map(Number);
                    newWidth = width;
                    newHeight = height;
                    break;
            }

            if (maintainAspectRatio && method === 'custom') {
                const ratio = Math.min(newWidth / originalImage.width, newHeight / originalImage.height);
                newWidth = Math.round(originalImage.width * ratio);
                newHeight = Math.round(originalImage.height * ratio);
            }

            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            canvas.width = newWidth;
            canvas.height = newHeight;

            ctx.drawImage(originalImage, 0, 0, newWidth, newHeight);

            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                displayResult(url, blob, newWidth, newHeight);
            }, 'image/png');
        }

        function displayResult(url, blob, width, height) {
            const resultImg = document.getElementById('resultImg');
            const resultContainer = document.getElementById('resultContainer');
            const newSize = document.getElementById('newSize');
            const downloadBtn = document.getElementById('downloadBtn');
            const copyBtn = document.getElementById('copyBtn');

            resultImg.src = url;
            resultContainer.style.display = 'block';
            newSize.textContent = `${width} × ${height} px`;

            resizedImage = { url, blob, width, height };

            downloadBtn.onclick = () => {
                const link = document.createElement('a');
                link.href = url;
                link.download = 'resized-image.png';
                link.click();
            };

            copyBtn.onclick = () => {
                blob.arrayBuffer().then(buffer => {
                    const uint8Array = new Uint8Array(buffer);
                    navigator.clipboard.write([
                        new ClipboardItem({
                            'image/png': new Blob([uint8Array], { type: 'image/png' })
                        })
                    ]).then(() => {
                        MultiTools.showSuccess('Image copied to clipboard!');
                    }).catch(() => {
                        MultiTools.showError('Failed to copy image to clipboard.');
                    });
                });
            };

            resultContainer.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>