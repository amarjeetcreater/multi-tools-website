<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convert Image to Base64 - Multi-Tools</title>
    <meta name="description" content="Convert images to Base64 string format. Free online image to base64 converter.">
    <meta name="keywords" content="image to base64, base64 converter, image converter">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/style.css">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
    crossorigin="anonymous"></script>
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="tool-container">
                    <div class="text-center mb-4">
                        <h1><i class="fas fa-code"></i> Convert Image to Base64</h1>
                        <p class="lead">Convert images to Base64 string format for web use</p>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-upload"></i> Upload Image</h5>
                                </div>
                                <div class="card-body">
                                    <div class="file-upload-area" id="uploadArea">
                                        <div class="upload-content">
                                            <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                            <h5>Drag & Drop Image Here</h5>
                                            <p>or click to browse</p>
                                            <input type="file" id="imageInput" accept="image/*" class="file-input">
                                            <button class="btn btn-primary" onclick="document.getElementById('imageInput').click()">
                                                <i class="fas fa-folder-open"></i> Choose File
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div id="imagePreview" class="mt-3" style="display: none;">
                                        <h6>Preview:</h6>
                                        <img id="previewImg" class="img-fluid rounded" alt="Preview">
                                        <div class="mt-2">
                                            <small class="text-muted">Size: <span id="imageSize"></span></small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-cogs"></i> Conversion Options</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="qualitySlider" class="form-label">Quality: <span id="qualityValue">80%</span></label>
                                        <input type="range" class="form-range" id="qualitySlider" min="1" max="100" value="80">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="maxWidth" class="form-label">Max Width (px):</label>
                                        <input type="number" class="form-control" id="maxWidth" value="800" min="100" max="2000">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="maintainAspectRatio" checked>
                                            <label class="form-check-label" for="maintainAspectRatio">
                                                Maintain aspect ratio
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <button class="btn btn-success w-100" id="convertBtn" disabled>
                                        <i class="fas fa-code"></i> Convert to Base64
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-code"></i> Base64 Result</h5>
                                </div>
                                <div class="card-body">
                                    <div id="resultContainer" style="display: none;">
                                        <div class="mb-3">
                                            <label for="base64Output" class="form-label">Base64 String:</label>
                                            <textarea class="form-control" id="base64Output" rows="8" readonly></textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="htmlOutput" class="form-label">HTML Image Tag:</label>
                                            <textarea class="form-control" id="htmlOutput" rows="3" readonly></textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="cssOutput" class="form-label">CSS Background:</label>
                                            <textarea class="form-control" id="cssOutput" rows="3" readonly></textarea>
                                        </div>
                                        
                                        <div class="d-grid gap-2 d-md-flex">
                                            <button class="btn btn-primary" id="copyBase64Btn">
                                                <i class="fas fa-copy"></i> Copy Base64
                                            </button>
                                            <button class="btn btn-outline-secondary" id="copyHtmlBtn">
                                                <i class="fas fa-copy"></i> Copy HTML
                                            </button>
                                            <button class="btn btn-outline-info" id="copyCssBtn">
                                                <i class="fas fa-copy"></i> Copy CSS
                                            </button>
                                            <button class="btn btn-outline-success" id="downloadBtn">
                                                <i class="fas fa-download"></i> Download
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ad Space -->
                    <div class="ad-space mt-4">
                        <div class="ad-placeholder">
                            <i class="fas fa-ad"></i>
                            <p>Advertisement Space</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Main JS -->
    <script src="../js/main.js"></script>
    
    <script>
        let originalImage = null;
        let base64String = null;

        document.addEventListener('DOMContentLoaded', function() {
            initializeImageToBase64();
        });

        function initializeImageToBase64() {
            const uploadArea = document.getElementById('uploadArea');
            const imageInput = document.getElementById('imageInput');
            const qualitySlider = document.getElementById('qualitySlider');
            const qualityValue = document.getElementById('qualityValue');
            const convertBtn = document.getElementById('convertBtn');

            qualitySlider.addEventListener('input', function() {
                qualityValue.textContent = this.value + '%';
            });

            imageInput.addEventListener('change', handleFileSelect);
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('drop', handleDrop);
            uploadArea.addEventListener('click', () => imageInput.click());
            convertBtn.addEventListener('click', convertToBase64);
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                processImage(file);
            } else {
                MultiTools.showError('Please select a valid image file.');
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('drag-over');
        }

        function handleDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('drag-over');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                const file = files[0];
                if (file.type.startsWith('image/')) {
                    processImage(file);
                } else {
                    MultiTools.showError('Please select a valid image file.');
                }
            }
        }

        function processImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    originalImage = img;
                    displayPreview(img, file);
                    document.getElementById('convertBtn').disabled = false;
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function displayPreview(img, file) {
            const previewImg = document.getElementById('previewImg');
            const imagePreview = document.getElementById('imagePreview');
            const imageSize = document.getElementById('imageSize');

            previewImg.src = img.src;
            imagePreview.style.display = 'block';
            imageSize.textContent = `${img.width} × ${img.height} px (${MultiTools.formatFileSize(file.size)})`;
        }

        function convertToBase64() {
            if (!originalImage) {
                MultiTools.showError('Please select an image first.');
                return;
            }

            const quality = document.getElementById('qualitySlider').value / 100;
            const maxWidth = parseInt(document.getElementById('maxWidth').value);
            const maintainAspectRatio = document.getElementById('maintainAspectRatio').checked;

            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            let newWidth = originalImage.width;
            let newHeight = originalImage.height;

            if (maintainAspectRatio && newWidth > maxWidth) {
                const ratio = maxWidth / newWidth;
                newWidth = maxWidth;
                newHeight = Math.round(newHeight * ratio);
            }

            canvas.width = newWidth;
            canvas.height = newHeight;

            ctx.drawImage(originalImage, 0, 0, newWidth, newHeight);

            const dataURL = canvas.toDataURL('image/jpeg', quality);
            base64String = dataURL.split(',')[1];

            displayResult();
        }

        function displayResult() {
            const resultContainer = document.getElementById('resultContainer');
            const base64Output = document.getElementById('base64Output');
            const htmlOutput = document.getElementById('htmlOutput');
            const cssOutput = document.getElementById('cssOutput');

            base64Output.value = base64String;
            htmlOutput.value = `<img src="data:image/jpeg;base64,${base64String}" alt="Image">`;
            cssOutput.value = `background-image: url('data:image/jpeg;base64,${base64String}');`;

            resultContainer.style.display = 'block';

            // Copy buttons
            document.getElementById('copyBase64Btn').onclick = () => {
                navigator.clipboard.writeText(base64String).then(() => {
                    MultiTools.showSuccess('Base64 string copied!');
                });
            };

            document.getElementById('copyHtmlBtn').onclick = () => {
                navigator.clipboard.writeText(htmlOutput.value).then(() => {
                    MultiTools.showSuccess('HTML code copied!');
                });
            };

            document.getElementById('copyCssBtn').onclick = () => {
                navigator.clipboard.writeText(cssOutput.value).then(() => {
                    MultiTools.showSuccess('CSS code copied!');
                });
            };

            document.getElementById('downloadBtn').onclick = () => {
                const link = document.createElement('a');
                link.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(base64String);
                link.download = 'image-base64.txt';
                link.click();
            };

            resultContainer.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html> 